---
category: React中概念
order: 2
title: Concurrent Mode | 并发模式
---

并发模式是一组新功能，可帮助React应用程序保持响应状态并优雅地适应用户的设备功能和网络速度。这些功能仍处于试验阶段，可能会发生变化。它们还不是稳定的React版本的一部分，但是您可以在实验版本中尝试它们

## 阻塞渲染出现的原因与为什么前端面试会考防抖节流

回顾一下我们在业务代码中常见的带有过滤功能的产品列表，当我们输入关键字进行过滤产品的时候，是否会感到卡顿？这种更新产品列表所产生的卡顿是不可避免的，因为在用户输入的同时浏览器又同时创建新的DOM节点或执行布局。这种并发行为必然会导致浏览器性能出现卡顿。在业内常见的做法就是防抖节流。debounce控制用户的输入节奏，只在用户输入之后，才开始渲染页面。throttling控制用户输入频率。这是由于绝大多数UI库的渲染是一个不可中断的过程，任何用户输入只会出现阻塞渲染。

并发模式通过使渲染可中断来解决此基本限制。这意味着当用户按下另一个键时，React不需要阻止浏览器更新文本输入。相反，它可以让浏览器对输入内容进行更新，然后继续在内存中呈现更新后的列表。渲染完成后，React将更新DOM，更改将反映在屏幕上。

这种设计来自游戏行业中常见的双缓冲模型，当浏览器渲染读取数据时，读取的是A内存的数据，而用户的写入则是B内存，只有在确认写入完成后，才将B内存的内容复制到A内存地址，然后一次性渲染。

## 并发

让我们回顾一下上面的两个例子，看看并发模式如何将它们结合起来。在并发模式下，React可以同时处理多个状态更新，就像分支使不同的团队成员独立工作一样：

* 对于CPU绑定更新（例如，创建DOM节点和运行组件代码），并发意味着更紧急的更新可以“中断”已经开始的渲染。
* 对于IO绑定更新（例如从网络中获取代码或数据、懒加载组件），并发意味着React甚至可以在所有数据到达之前就开始在内存中渲染，并跳过显示Loading页面。

重要的是，您使用React的方式是相同的。组件，道具和状态之类的概念从根本上以相同的方式工作。要更新屏幕时，可以设置状态。React使用试探法来确定更新的“紧急程度”，并允许您使用几行代码对其进行调整，以便您可以在每次交互时获得所需的用户体验。
______________
[](https://juejin.im/post/6844903975112671239#%E5%8D%95%E5%A4%84%E7%90%86%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6-fiber-%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E4%B8%9C%E8%A5%BF)